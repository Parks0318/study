## 지연로딩과 즉시로딩

#### 지연 로딩
    
    * FetchType.LAZY
    * 연관된 엔티티를 실제 사용할 때 조회
    * 회원-팀 관계에서 가짜 프록시 객체를 team에 넣어두고 실제 team을 사용하는 시점에 초기회(DB 조회)
    
#### 즉시 로딩
    
    * FetchType.EAGER
    * 엔티티를 조회할 때 연관된 엔티티도 함께 조회
    * 회원-팀 관계에서 회원 조회시 팀까지 동시에 조회
    * 대부분 JPA구현체에서 가능하면 조인을 사용해서 SQL문 한번에 조회

    
**프록시와 즉시로딩 주의**

    * 가급적 지연 로딩만 사용(특히 실무에서)
    * 즉시 로딩을 적용하면 예상하지 못한 SQL이 발생
    * 즉시 로딩은 JPQL에서 N+1문제를 일으킨다.
        + 회원을 조회할 때 회원만 조회 후 팀과 eager관계인 것을 확인하고 추가 쿼리 N개가 발생
        + 해결하기 위한 방안
            - 모든 설정을 lazy로 셋팅. 패치조인을 이용해서 필요한 것만 조회
            - 엔티티 그래프와 어노테이션
            - 배치 사이즈 
    * @ManyToOne, @OneToOne은 기본이 즉시로딩 -> LAZY로 설정
    * @OneToMany, @ManyToMany는 기본이 지연 로딩
    
    
**지연 로딩 활용 - 실무**

```
    * 모든 연관관계에서 지연 로딩을 사용해라
    * 실무에서 즉시 로딩을 사용하지 마라
    * JPQL fetch 조인이나, 엔티티 그래프 기능을 사용해라 
    * 즉시 로딩은 상상하지 못한 쿼리가 나간다
```
    