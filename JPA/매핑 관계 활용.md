## 다중성
   
#### 데이터 베이스 관섬에서 고민

   * 다대일 @ManyToOne
   * 일대다 @OneToMany
   * 일대일
   * 다대다
   * 단방향, 양방향 
   * 연관관계의 주인 개념

**다대일 단방향**
   
   멤버에서 팀을 가고자하는 관계를 맺지만
   팀에서는 멤버에 대한 관계를 갖고있지않는다.

**일대다 단방향 (비추!!)**

   팀을 중심으로 멤버를 관리하겠다.
   팀에서 멤버를 변경하면 멤버의 외래키로 관리가 되어야함.
   객체와 테이블의 차이 때문에 반대편 테이블의 외래키를 관리하는 특이한 구조
   @JoinColumn을 꼭 사용해야함. 안그러면 조인 테이블 방식을 사용함. (중간에 테이블을 하나 사용 -> default)
   단점으로 추가 UPDATE SQL이 사용됨. 외래키쪽 수정을 위해.

**일대다 양방향**

   한쪽에 insertable=false, updatable=false를 통해 읽기전용만 하도록 만들 수 있다.
   공식적으로 존재하진않음.
   다대일 양방향을 사용하자.

**일대일**
 
   다대일 양방향 매핑처럼 외래키가 있는 곳이 연관관계의 주인
   * 번외 : 멤버에서 락커를 가질지 락커에서 멤버를 가질지.. 
      dba입장과 다른점은? 
         비즈니스에서 멤버를 자주 조회하니까 락커를 갖고있는 지에 대해 쉽게 구할 수 있다.

```
    * 주 테이블에 외래키 
      - 주 객체가 대상의 객체의 참조를 가지는 것 처럼 주 테이블에 외래 키를 두고 대상 테이블을 찾음
      - 객체지향 개발자 선호
      - JPA 매핑 편리
      - 장점 : 주테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능
      - 단점 : 값이 없으면 외래키에 null 허용

   * 대상 테이블에 외래키
      - 대상 테이블에 외래 키가 존재
      - 전통적인 데이터베이스 개발자 선호
      - 장점 : 주 테이블과 대상테이블을 일대일에서 일대 다 관계로 변경할 때 테이블 구조 유지
      - 단점 : 프록시 기능의 한계로 지연 로딩으로 설정해도 항상 즉시 로딩됨
```
   


**다대다 (실무에서 비추)**
   관게형 DB는 정규화된 테이블 2개로 다대다 관계를 표현할 수 없음.
   객체는 컬렉션을 사용해서 객체 2개로 다대다 관계가 가능.
   @ManyToMany
   연결 테이블이 단순히 연결만 하고 끝나지 않음.
   주문시간, 수량 같은 데이터가 들어올 수 있음(매핑정보만 중간 테이블에  들어감)
   다대다 한계 극복
      - 연결 테이블용 엔티티 추가(연결 테이블을 엔티티로 승격)
      - @ManyToMany -> @OneToMany, @ManyToOne
